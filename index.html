<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Overlay</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="chat-container" id="chatContainer">
        <!-- Header -->
        <div class="header">
            <div class="model-selector">
                <select id="modelSelect">
                    <option value="ollama">ğŸ¤– Ollama</option>
                    <option value="llamacpp">ğŸ”§ Llama.cpp</option>
                    <option value="coqui">ğŸ”Š Coqui-TTS</option>
                </select>
            </div>
            <div class="controls">
                <button id="accordionToggle" title="Minimize to Bar">ğŸ“</button>
                <button id="settingsToggle" title="Settings">âš™ï¸</button>
                <button id="openClaude" title="Open Claude">ğŸŒ</button>
                <button id="togglePin" title="Toggle Always On Top">ğŸ“Œ</button>
                <button id="minimize" title="Minimize">â–</button>
                
                <!-- Settings Panel -->
                <div class="settings-panel" id="settingsPanel">
                    <div class="settings-section">
                        <h4>Quick Settings</h4>
                        <div class="setting-item">
                            <label>Font Size</label>
                            <input type="range" id="fontSizeSlider" min="11" max="16" value="13">
                        </div>
                        <div class="setting-item">
                            <label>Compact Mode</label>
                            <input type="checkbox" id="compactMode">
                        </div>
                    </div>
                    <div class="settings-section">
                        <button class="settings-btn" id="openFullSettings">âš™ï¸ Advanced Settings (Coming Soon)</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Tools -->
        <div class="chat-tools" id="chatTools">
            <button class="tool-btn" id="exportChat" title="Export Chat">ğŸ’¾ Export</button>
            <button class="tool-btn" id="clearChat" title="Clear Chat">ğŸ—‘ï¸ Clear</button>
            <button class="tool-btn" id="wordCount" title="Word Count">ğŸ“Š <span id="wordCountValue">0</span></button>
        </div>

        <!-- Model Configuration -->
        <div class="config-panel" id="configPanel">
            <!-- Ollama Config -->
            <div id="ollamaConfig" class="model-config active">
                <div class="service-header">
                    <span class="service-title">ğŸ¤– Ollama Service</span>
                    <div class="service-controls">
                        <button id="ollamaStart" class="start-btn" title="Start Ollama">â–¶ï¸</button>
                        <button id="ollamaStop" class="stop-btn" title="Stop Ollama">â¹ï¸</button>
                        <span id="ollamaStatus" class="service-status stopped">â— Stopped</span>
                    </div>
                </div>
                <input type="text" id="ollamaWorkDir" placeholder="Working directory (optional)" title="Leave empty to use current directory">
                <input type="text" id="ollamaUrl" placeholder="http://localhost:11434" value="http://localhost:11434">
                <div style="display: flex; gap: 8px; align-items: center;">
                    <select id="ollamaModel" style="flex: 1;">
                        <option value="">Select Model</option>
                    </select>
                    <button id="refreshOllama" title="Refresh Models">ğŸ”„</button>
                </div>
            </div>

            <!-- Llama.cpp Config -->
            <div id="llamacppConfig" class="model-config">
                <div class="service-header">
                    <span class="service-title">ğŸ”§ Llama.cpp Server</span>
                    <div class="service-controls">
                        <button id="llamacppStart" class="start-btn" title="Start Llama.cpp">â–¶ï¸</button>
                        <button id="llamacppStop" class="stop-btn" title="Stop Llama.cpp">â¹ï¸</button>
                        <span id="llamacppStatus" class="service-status stopped">â— Stopped</span>
                    </div>
                </div>
                <input type="text" id="llamacppWorkDir" placeholder="Llama.cpp directory (required)" title="Directory containing the 'server' executable">
                <input type="text" id="llamacppModelPath" placeholder="Model file path (.gguf)" title="Path to your GGUF model file">
                <div style="display: flex; gap: 8px;">
                    <input type="text" id="llamacppPort" placeholder="Port (8080)" value="8080" style="flex: 1;">
                    <input type="text" id="llamacppUrl" placeholder="http://localhost:8080" value="http://localhost:8080" style="flex: 2;">
                </div>
                <input type="text" id="llamacppArgs" placeholder="Additional args (e.g., -t 8 -c 4096)" title="Custom parameters">
                <button id="refreshLlamacpp" title="Test Connection">ğŸ”„</button>
            </div>

            <!-- Coqui-TTS Config -->
            <div id="coquiConfig" class="model-config">
                <div class="service-header">
                    <span class="service-title">ğŸ”Š Coqui-TTS Server</span>
                    <div class="service-controls">
                        <button id="coquiStart" class="start-btn" title="Start Coqui-TTS">â–¶ï¸</button>
                        <button id="coquiStop" class="stop-btn" title="Stop Coqui-TTS">â¹ï¸</button>
                        <span id="coquiStatus" class="service-status stopped">â— Stopped</span>
                    </div>
                </div>
                <input type="text" id="coquiWorkDir" placeholder="Working directory (optional)" title="Python environment path">
                <div style="display: flex; gap: 8px;">
                    <input type="text" id="coquiPort" placeholder="Port (5002)" value="5002" style="flex: 1;">
                    <input type="text" id="coquiUrl" placeholder="http://localhost:5002" value="http://localhost:5002" style="flex: 2;">
                </div>
                <input type="text" id="coquiArgs" placeholder="Additional args (e.g., --use_cuda)" title="Custom parameters">
                <div style="display: flex; gap: 8px; align-items: center;">
                    <select id="coquiModel" style="flex: 1;">
                        <option value="">Select TTS Model</option>
                    </select>
                    <button id="refreshCoqui" title="Refresh Models">ğŸ”„</button>
                </div>
            </div>
        </div>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chatMessages">
            <div class="message system">
                <div class="message-content">
                    ğŸš€ AI Chat Overlay ready! Select a model above to start chatting.
                    <div class="message-actions">
                        <button class="message-action-btn" onclick="copyMessage(this)">ğŸ“‹</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar" id="statusBar">
            <div class="status-info">
                <span id="connectionStatus">Disconnected</span>
                <span id="currentModelDisplay">No Model Selected</span>
            </div>
            <div class="status-info">
                <span id="currentPortDisplay">Port: N/A</span>
                <span id="messageCount">0 messages</span>
                <span id="sessionTime">00:00</span>
            </div>
        </div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-controls">
                <div class="input-wrapper">
                    <textarea id="messageInput" placeholder="Type your message..." disabled rows="1"></textarea>
                </div>
                <div class="input-buttons">
                    <button id="clearButton" title="Clear Chat" disabled>ğŸ—‘ï¸</button>
                    <button id="speakButton" title="Text-to-Speech" disabled>ğŸ”Š</button>
                    <button id="sendButton" disabled>Send</button>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>